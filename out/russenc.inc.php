<?php
// functions for determining codepage of unknown russian text
//
// this is a file, generated by russ-enc library v0.02

// 
// returns: 'u' - utf8, 'w' - windows, 'k' - koi8, 'd' - dos(866), 'i' - iso8859-5, 'm' - x-mac-cyrillic 
function RussEncDetermine($text) {
    $marks = array();
    $marks['w'] = RussEncTextMark($text);
    $marks['u'] = RussEncTextMark(@iconv("utf-8", "windows-1251",$text));
    foreach (array('k','d','i','m') as $enc) $marks[$enc] = RussEncTextMark(convert_cyr_string($text,$enc,'w'));
    arsort($marks, SORT_NUMERIC);
    $keys = array_keys($marks);
    return $keys[0];
}

function RussEncTextMark($text) 
{
    if (!$text) return 0;
    $mark = 0;
    $text = strtoupper($text);
    for ($i=1;$i<strlen($text);$i++) $mark += RussEncPairSum($text[$i-1],$text[$i]);
    return $mark;
}

function RussEncPairSum($c1,$c2) {
  if ($c1=="") {
    if ($c2=="") return 120;
    if ($c2=="") return 112;
    if ($c2=="") return 96;
    if ($c2=="") return 90;
    if ($c2=="") return 84;
    if ($c2=="") return 81;
    if ($c2=="") return 73;
    if ($c2=="") return 67;
    if ($c2=="") return 65;
    if ($c2=="") return 50;
    if ($c2=="") return 50;
    if ($c2=="") return 36;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 157;
    if ($c2=="") return 147;
    if ($c2=="") return 142;
    if ($c2=="") return 113;
    if ($c2=="") return 46;
    if ($c2=="") return 43;
    if ($c2=="") return 34;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 137;
    if ($c2=="") return 66;
    if ($c2=="") return 63;
    if ($c2=="") return 61;
    if ($c2=="") return 61;
    if ($c2=="") return 54;
    if ($c2=="") return 46;
    if ($c2=="") return 38;
    if ($c2=="") return 36;
    if ($c2=="") return 36;
    if ($c2=="") return 31;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 110;
    if ($c2=="") return 90;
    if ($c2=="") return 80;
    if ($c2=="") return 62;
    if ($c2=="") return 60;
    if ($c2=="") return 59;
    if ($c2=="") return 51;
    if ($c2=="") return 39;
    if ($c2=="") return 36;
    if ($c2=="") return 33;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 216;
    if ($c2=="") return 89;
    if ($c2=="") return 79;
    if ($c2=="") return 75;
    if ($c2=="") return 55;
    if ($c2=="") return 40;
    if ($c2=="") return 37;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 159;
    if ($c2=="") return 68;
    if ($c2=="") return 63;
    if ($c2=="") return 45;
    if ($c2=="") return 41;
    if ($c2=="") return 39;
    if ($c2=="") return 37;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 108;
    if ($c2=="") return 88;
    if ($c2=="") return 80;
    if ($c2=="") return 69;
    if ($c2=="") return 55;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 106;
    if ($c2=="") return 83;
    if ($c2=="") return 64;
    if ($c2=="") return 60;
    if ($c2=="") return 50;
    if ($c2=="") return 36;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 102;
    if ($c2=="") return 100;
    if ($c2=="") return 82;
    if ($c2=="") return 68;
    if ($c2=="") return 34;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 66;
    if ($c2=="") return 56;
    if ($c2=="") return 55;
    if ($c2=="") return 42;
    if ($c2=="") return 38;
    if ($c2=="") return 36;
    if ($c2=="") return 34;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 116;
    if ($c2=="") return 113;
    if ($c2=="") return 39;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 121;
    if ($c2=="") return 94;
    if ($c2=="") return 32;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 69;
    if ($c2=="") return 64;
    if ($c2=="") return 64;
    if ($c2=="") return 31;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 46;
    if ($c2=="") return 43;
    if ($c2=="") return 43;
    if ($c2=="") return 39;
    if ($c2=="") return 38;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 62;
    if ($c2=="") return 50;
    if ($c2=="") return 32;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 122;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 79;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 60;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 59;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 41;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 38;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 36;
    return 0;
  }
  if ($c1=="") {
    if ($c2=="") return 32;
    return 0;
  }
  return 0;}


?>